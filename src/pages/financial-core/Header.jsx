import { useState, useRef, useEffect } from "react";
import "./Header.css";
import avatar from "../../assets/arab1.png";

export default function Header({ isDarkMode, toggleTheme, invoiceId }) {
  const [profileOpen, setProfileOpen] = useState(false);
  const profileRef = useRef(null);

  // Close dropdown on OUTSIDE click
  useEffect(() => {
    const handleClickOutside = (e) => {
      if (profileRef.current && !profileRef.current.contains(e.target)) {
        setProfileOpen(false);
      }
    };

    document.addEventListener("click", handleClickOutside);
    return () => document.removeEventListener("click", handleClickOutside);
  }, []);

  return (
    <header className={`em-header ${isDarkMode ? 'dark-mode' : ''}`}>
      {invoiceId ? (
        <div className="em-header-breadcrumb">
          <svg width="150" height="21" viewBox="0 0 150 21" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.33008 7.26953L5.3252 7.91211C5.11328 7.59766 4.92188 7.36523 4.74414 7.22168C4.44336 6.97559 4.08789 6.85254 3.6709 6.85254C3.17188 6.85254 2.78223 7.0166 2.48828 7.35156C2.24902 7.625 2.12598 7.93262 2.12598 8.28125C2.12598 8.84863 2.5498 9.2998 3.39746 9.62109L4.2998 9.96973C5.22949 10.332 5.8584 10.7627 6.17969 11.2754C6.40527 11.6377 6.51465 12.041 6.51465 12.499C6.51465 13.3398 6.2002 14.0439 5.57129 14.6113C4.99707 15.124 4.2998 15.377 3.48633 15.377C1.94824 15.377 0.895508 14.4746 0.512695 12.834L1.72266 12.5059C1.8252 12.9023 1.9209 13.1826 2.0166 13.3535C2.35156 13.9209 2.84375 14.208 3.50684 14.208C4.04688 14.208 4.48438 14.0166 4.82617 13.6406C5.11328 13.3125 5.25684 12.9365 5.25684 12.5059C5.25684 12.2256 5.18164 11.9863 5.03125 11.7881C4.82617 11.5215 4.38867 11.2549 3.72559 10.9951L2.86426 10.6602C1.54492 10.1475 0.888672 9.34766 0.888672 8.27441C0.888672 7.51562 1.16211 6.89355 1.71582 6.40137C2.25586 5.92969 2.91895 5.69043 3.71191 5.69043C4.85352 5.69043 5.65332 6.17578 6.33008 7.26953ZM13.9727 8.99219V15.1992H12.7764V14.5225C12.3867 14.8369 12.0381 15.0557 11.7441 15.1855C11.4434 15.3154 11.1152 15.377 10.7598 15.377C10.2197 15.377 9.7002 15.2402 9.21484 14.96C8.71582 14.666 8.31934 14.2764 8.03223 13.7773C7.73828 13.2646 7.58789 12.6973 7.58789 12.0889C7.58789 11.0908 7.9502 10.2705 8.66797 9.62793C9.27637 9.08789 9.97363 8.81445 10.7598 8.81445C11.1152 8.81445 11.4434 8.87598 11.7441 8.99902C12.0381 9.12891 12.3867 9.34766 12.7764 9.66895V8.99219H13.9727ZM10.7939 9.90137C10.4248 9.90137 10.083 9.99707 9.76855 10.1885C9.11914 10.5781 8.79785 11.207 8.79785 12.0889C8.79785 12.8203 9.02344 13.3877 9.48145 13.791C9.85742 14.126 10.2949 14.29 10.8076 14.29C11.3955 14.29 11.8809 14.085 12.2568 13.668C12.6191 13.2715 12.7969 12.7383 12.7969 12.0615C12.7969 11.3438 12.5713 10.79 12.1201 10.3867C11.7578 10.0654 11.3135 9.90137 10.7939 9.90137ZM16.8506 5.86816V15.1992H15.6543V5.86816H16.8506ZM24.1924 12.5742H19.373C19.4346 12.9502 19.5645 13.2715 19.7627 13.5449C20.1182 14.0439 20.624 14.29 21.2803 14.29C21.9844 14.29 22.6406 13.9482 22.9619 13.4082C23.0166 13.3193 23.0508 13.2646 23.0645 13.2441L24.1104 13.6816C23.4404 14.8096 22.4971 15.377 21.2871 15.377C20.3369 15.377 19.5645 15.0352 18.9697 14.3516C18.416 13.7227 18.1426 12.9707 18.1426 12.0889C18.1426 11.0703 18.498 10.2432 19.2021 9.59375C19.7695 9.07422 20.4326 8.81445 21.1982 8.81445C22.0664 8.81445 22.791 9.14258 23.3721 9.79199C23.9258 10.4141 24.1992 11.2139 24.1992 12.2051C24.1992 12.2393 24.1992 12.3623 24.1924 12.5742ZM19.373 11.6104H23.0029C22.9277 11.1797 22.7773 10.8242 22.5518 10.5371C22.2168 10.1064 21.7656 9.8877 21.2051 9.8877C20.2549 9.8877 19.5713 10.5371 19.373 11.6104ZM24.9785 13.6748L25.9834 13.2646C26.3662 14.0371 26.6943 14.3037 27.248 14.3037C27.583 14.3037 27.8359 14.2012 28.0068 13.9961C28.1572 13.8184 28.2324 13.6201 28.2324 13.4014C28.2324 13.2031 28.1709 13.0459 28.0479 12.9365C27.918 12.8271 27.6514 12.6904 27.2412 12.5332L26.5918 12.2803C25.7168 11.9453 25.2793 11.4053 25.2793 10.6602C25.2793 10.1201 25.4775 9.68262 25.874 9.34082C26.2773 8.99219 26.7627 8.81445 27.3301 8.81445C28.1846 8.81445 28.834 9.22461 29.2852 10.0518L28.3418 10.5371C28.0479 10.0928 27.6992 9.87402 27.3027 9.87402C26.7764 9.87402 26.4072 10.1816 26.4072 10.626C26.4072 10.8242 26.4619 10.9746 26.5781 11.0703C26.6943 11.1729 26.9609 11.3027 27.3916 11.4668L27.9863 11.6992C28.998 12.0889 29.4287 12.5879 29.4287 13.3535C29.4287 13.9346 29.21 14.4268 28.7656 14.8164C28.3486 15.1924 27.8291 15.377 27.2207 15.377C26.1611 15.377 25.4092 14.8096 24.9785 13.6748ZM35.6016 4.87695L36.668 5.36914C35.9639 7.20117 35.6084 9.19043 35.6084 11.3369C35.6084 13.4902 35.9639 15.4727 36.668 17.2979L35.6016 17.7969C35.4512 17.4688 35.3486 17.2295 35.2871 17.0723C35.082 16.5186 34.9111 15.8828 34.7744 15.1582C34.5215 13.8252 34.3984 12.5469 34.3984 11.3096C34.3984 10.1064 34.5078 8.93066 34.7197 7.78906C34.9316 6.64746 35.2256 5.67676 35.6016 4.87695ZM44.1533 12.6768H39.9971L39.0537 15.1992H37.7549L41.3096 5.86816H42.8613L46.416 15.1992H45.1035L44.1533 12.6768ZM42.0684 7.12598L40.4277 11.5146H43.7227L42.0684 7.12598ZM51.4951 11.1797L53.7305 15.1992H52.3291L50.2783 11.4668C49.9707 11.4873 49.7246 11.501 49.5332 11.501H48.7949V15.1992H47.5439V5.86816H49.5332C50.4697 5.86816 51.1807 6.01172 51.6797 6.29199C52.083 6.52441 52.4111 6.8457 52.6504 7.2627C52.9102 7.70703 53.04 8.19238 53.04 8.72559C53.04 9.8125 52.4727 10.7148 51.4951 11.1797ZM48.7949 7.0166V10.3662H49.6562C51.0918 10.3662 51.8096 9.81934 51.8096 8.71875C51.8096 8.08984 51.5156 7.5498 51.0439 7.2832C50.7295 7.10547 50.2646 7.0166 49.6562 7.0166H48.7949ZM56.2803 17.7969L55.2139 17.2979C55.918 15.4795 56.2734 13.4902 56.2734 11.3301C56.2734 9.16992 55.918 7.18066 55.2139 5.36914L56.2803 4.87695C56.5195 5.38965 56.7246 5.9502 56.8887 6.56543C57.2852 8.0625 57.4834 9.6416 57.4834 11.3096C57.4834 12.8887 57.2988 14.4336 56.9365 15.9375C56.7861 16.5664 56.5674 17.1885 56.2803 17.7969Z" fill="#51636F"/>
            <rect width="2" height="6" transform="translate(66.5752 7.5)" fill="#51636F"/>
            <path d="M80.99 15.5996H77.6938V5.41779H81.0944C82.092 5.41779 82.9488 5.62163 83.6647 6.0293C84.3806 6.43365 84.9291 7.01533 85.3103 7.77433C85.6948 8.53001 85.887 9.43649 85.887 10.4938C85.887 11.5544 85.6931 12.4658 85.3053 13.2282C84.9208 13.9905 84.364 14.5771 83.6349 14.9881C82.9057 15.3958 82.0241 15.5996 80.99 15.5996ZM79.23 14.2573H80.9055C81.681 14.2573 82.3257 14.1114 82.8394 13.8198C83.3531 13.5248 83.7376 13.0989 83.9928 12.5421C84.248 11.9819 84.3756 11.2992 84.3756 10.4938C84.3756 9.69502 84.248 9.01722 83.9928 8.4604C83.7409 7.90359 83.3647 7.481 82.8643 7.19265C82.3638 6.9043 81.7423 6.76012 80.9999 6.76012H79.23V14.2573ZM89.9003 15.7686C89.4164 15.7686 88.9789 15.6792 88.5878 15.5002C88.1967 15.3179 87.8868 15.0544 87.6581 14.7097C87.4327 14.365 87.32 13.9424 87.32 13.4419C87.32 13.0111 87.4029 12.6564 87.5686 12.378C87.7343 12.0996 87.9581 11.8792 88.2398 11.7168C88.5215 11.5544 88.8364 11.4318 89.1844 11.3489C89.5324 11.266 89.887 11.2031 90.2483 11.16C90.7057 11.1069 91.0769 11.0639 91.3619 11.0307C91.647 10.9943 91.8541 10.9363 91.9834 10.8567C92.1127 10.7772 92.1773 10.6479 92.1773 10.4689V10.4341C92.1773 9.99994 92.0547 9.66353 91.8094 9.42489C91.5674 9.18626 91.2062 9.06694 90.7256 9.06694C90.2251 9.06694 89.8307 9.17797 89.5423 9.40004C89.2573 9.61879 89.0601 9.86239 88.9507 10.1309L87.5537 9.81268C87.7194 9.34866 87.9614 8.97414 88.2796 8.6891C88.6011 8.40075 88.9706 8.19194 89.3882 8.06268C89.8058 7.9301 90.245 7.86381 90.7057 7.86381C91.0106 7.86381 91.3338 7.90027 91.6752 7.97319C92.0199 8.04279 92.3414 8.17205 92.6396 8.36097C92.9413 8.54989 93.1882 8.82002 93.3804 9.17134C93.5727 9.51935 93.6688 9.97177 93.6688 10.5286V15.5996H92.2171V14.5556H92.1574C92.0613 14.7478 91.9171 14.9367 91.7249 15.1223C91.5326 15.3079 91.2857 15.4621 90.9841 15.5847C90.6825 15.7073 90.3212 15.7686 89.9003 15.7686ZM90.2235 14.5755C90.6344 14.5755 90.9858 14.4943 91.2774 14.3319C91.5724 14.1694 91.7961 13.9573 91.9486 13.6955C92.1044 13.4303 92.1823 13.147 92.1823 12.8453V11.861C92.1292 11.914 92.0265 11.9637 91.874 12.0101C91.7249 12.0532 91.5542 12.0913 91.3619 12.1245C91.1697 12.1543 90.9825 12.1825 90.8002 12.209C90.6179 12.2322 90.4654 12.2521 90.3428 12.2686C90.0544 12.3051 89.7909 12.3664 89.5523 12.4526C89.317 12.5388 89.128 12.6631 88.9855 12.8255C88.8463 12.9846 88.7767 13.1967 88.7767 13.4618C88.7767 13.8297 88.9126 14.1081 89.1844 14.2971C89.4562 14.4827 89.8025 14.5755 90.2235 14.5755ZM101.371 9.82759L100.024 10.0662C99.9674 9.89388 99.8779 9.72982 99.7552 9.57404C99.6359 9.41826 99.4735 9.29066 99.268 9.19123C99.0625 9.0918 98.8057 9.04208 98.4974 9.04208C98.0765 9.04208 97.7252 9.13654 97.4434 9.32546C97.1617 9.51107 97.0209 9.75136 97.0209 10.0463C97.0209 10.3016 97.1153 10.507 97.3042 10.6628C97.4932 10.8186 97.7981 10.9462 98.219 11.0456L99.4321 11.324C100.135 11.4864 100.658 11.7367 101.003 12.0748C101.348 12.4128 101.52 12.852 101.52 13.3922C101.52 13.8496 101.388 14.2573 101.122 14.6152C100.861 14.9699 100.494 15.2483 100.024 15.4505C99.5564 15.6526 99.0145 15.7537 98.398 15.7537C97.5429 15.7537 96.8452 15.5714 96.305 15.2069C95.7647 14.839 95.4333 14.3169 95.3106 13.6408L96.7474 13.4221C96.8369 13.7966 97.0209 14.08 97.2993 14.2722C97.5777 14.4611 97.9406 14.5556 98.3881 14.5556C98.8753 14.5556 99.2647 14.4545 99.5564 14.2523C99.848 14.0468 99.9939 13.7966 99.9939 13.5016C99.9939 13.263 99.9044 13.0624 99.7254 12.9C99.5497 12.7376 99.2796 12.615 98.915 12.5321L97.6224 12.2488C96.9098 12.0864 96.3828 11.8278 96.0415 11.4732C95.7034 11.1185 95.5344 10.6694 95.5344 10.1259C95.5344 9.67513 95.6603 9.28072 95.9122 8.94265C96.1641 8.60458 96.5121 8.34109 96.9562 8.15217C97.4004 7.95993 97.9091 7.86381 98.4825 7.86381C99.3078 7.86381 99.9574 8.04279 100.431 8.40075C100.905 8.75539 101.219 9.231 101.371 9.82759ZM104.641 11.0655V15.5996H103.155V5.41779H104.621V9.20614H104.716C104.895 8.79516 105.168 8.46869 105.536 8.22674C105.904 7.98479 106.384 7.86381 106.978 7.86381C107.501 7.86381 107.959 7.97153 108.35 8.18697C108.744 8.4024 109.049 8.7239 109.265 9.15146C109.483 9.5757 109.593 10.106 109.593 10.7424V15.5996H108.106V10.9213C108.106 10.3612 107.962 9.92702 107.674 9.61879C107.385 9.30723 106.984 9.15146 106.471 9.15146C106.119 9.15146 105.804 9.22603 105.526 9.37518C105.251 9.52432 105.034 9.74307 104.875 10.0314C104.719 10.3165 104.641 10.6612 104.641 11.0655ZM111.696 15.5996V5.41779H113.182V9.20117H113.272C113.358 9.04208 113.482 8.85813 113.645 8.64933C113.807 8.44052 114.032 8.25823 114.321 8.10245C114.609 7.94336 114.99 7.86381 115.464 7.86381C116.081 7.86381 116.631 8.01959 117.115 8.33114C117.599 8.6427 117.978 9.0918 118.253 9.67844C118.532 10.2651 118.671 10.9711 118.671 11.7963C118.671 12.6216 118.533 13.3292 118.258 13.9192C117.983 14.5059 117.605 14.9583 117.125 15.2765C116.644 15.5913 116.096 15.7488 115.479 15.7488C115.015 15.7488 114.636 15.6709 114.341 15.5151C114.049 15.3593 113.82 15.177 113.655 14.9682C113.489 14.7594 113.361 14.5738 113.272 14.4114H113.147V15.5996H111.696ZM113.152 11.7814C113.152 12.3184 113.23 12.789 113.386 13.1934C113.542 13.5977 113.767 13.9142 114.062 14.1429C114.357 14.3683 114.718 14.481 115.146 14.481C115.59 14.481 115.961 14.3633 116.26 14.128C116.558 13.8894 116.783 13.5662 116.936 13.1586C117.092 12.7509 117.169 12.2918 117.169 11.7814C117.169 11.2776 117.093 10.8252 116.941 10.4242C116.792 10.0231 116.566 9.70662 116.265 9.47461C115.966 9.2426 115.593 9.1266 115.146 9.1266C114.715 9.1266 114.351 9.23763 114.052 9.45969C113.757 9.68176 113.534 9.99165 113.381 10.3894C113.229 10.7871 113.152 11.2511 113.152 11.7814ZM123.557 15.7537C122.841 15.7537 122.216 15.5897 121.682 15.2615C121.149 14.9334 120.735 14.4744 120.44 13.8844C120.145 13.2944 119.997 12.6051 119.997 11.8162C119.997 11.0241 120.145 10.3314 120.44 9.7381C120.735 9.14483 121.149 8.68413 121.682 8.356C122.216 8.02788 122.841 7.86381 123.557 7.86381C124.273 7.86381 124.897 8.02788 125.431 8.356C125.965 8.68413 126.379 9.14483 126.674 9.7381C126.969 10.3314 127.116 11.0241 127.116 11.8162C127.116 12.6051 126.969 13.2944 126.674 13.8844C126.379 14.4744 125.965 14.9334 125.431 15.2615C124.897 15.5897 124.273 15.7537 123.557 15.7537ZM123.562 14.5059C124.026 14.5059 124.41 14.3832 124.715 14.138C125.02 13.8927 125.245 13.5662 125.391 13.1586C125.54 12.7509 125.615 12.3018 125.615 11.8113C125.615 11.324 125.54 10.8766 125.391 10.4689C125.245 10.0579 125.02 9.72816 124.715 9.47958C124.41 9.231 124.026 9.10671 123.562 9.10671C123.094 9.10671 122.707 9.231 122.398 9.47958C122.093 9.72816 121.866 10.0579 121.717 10.4689C121.571 10.8766 121.498 11.324 121.498 11.8113C121.498 12.3018 121.571 12.7509 121.717 13.1586C121.866 13.5662 122.093 13.8927 122.398 14.138C122.707 14.3832 123.094 14.5059 123.562 14.5059ZM130.998 15.7686C130.514 15.7686 130.077 15.6792 129.685 15.5002C129.294 15.3179 128.984 15.0544 128.756 14.7097C128.53 14.365 128.418 13.9424 128.418 13.4419C128.418 13.0111 128.501 12.6564 128.666 12.378C128.832 12.0996 129.056 11.8792 129.337 11.7168C129.619 11.5544 129.934 11.4318 130.282 11.3489C130.63 11.266 130.985 11.2031 131.346 11.16C131.803 11.1069 132.175 11.0639 132.46 11.0307C132.745 10.9943 132.952 10.9363 133.081 10.8567C133.21 10.7772 133.275 10.6479 133.275 10.4689V10.4341C133.275 9.99994 133.152 9.66353 132.907 9.42489C132.665 9.18626 132.304 9.06694 131.823 9.06694C131.323 9.06694 130.928 9.17797 130.64 9.40004C130.355 9.61879 130.158 9.86239 130.048 10.1309L128.651 9.81268C128.817 9.34866 129.059 8.97414 129.377 8.6891C129.699 8.40075 130.068 8.19194 130.486 8.06268C130.903 7.9301 131.343 7.86381 131.803 7.86381C132.108 7.86381 132.431 7.90027 132.773 7.97319C133.118 8.04279 133.439 8.17205 133.737 8.36097C134.039 8.54989 134.286 8.82002 134.478 9.17134C134.67 9.51935 134.766 9.97177 134.766 10.5286V15.5996H133.315V14.5556H133.255C133.159 14.7478 133.015 14.9367 132.823 15.1223C132.63 15.3079 132.383 15.4621 132.082 15.5847C131.78 15.7073 131.419 15.7686 130.998 15.7686ZM131.321 14.5755C131.732 14.5755 132.083 14.4943 132.375 14.3319C132.67 14.1694 132.894 13.9573 133.046 13.6955C133.202 13.4303 133.28 13.147 133.28 12.8453V11.861C133.227 11.914 133.124 11.9637 132.972 12.0101C132.823 12.0532 132.652 12.0913 132.46 12.1245C132.267 12.1543 132.08 12.1825 131.898 12.209C131.716 12.2322 131.563 12.2521 131.44 12.2686C131.152 12.3051 130.889 12.3664 130.65 12.4526C130.415 12.5388 130.226 12.6631 130.083 12.8255C129.944 12.9846 129.874 13.1967 129.874 13.4618C129.874 13.8297 130.01 14.1081 130.282 14.2971C130.554 14.4827 130.9 14.5755 131.321 14.5755ZM136.746 15.5996V7.96325H138.183V9.17631H138.263C138.402 8.76533 138.647 8.44218 138.998 8.20685C139.353 7.96822 139.754 7.8489 140.202 7.8489C140.294 7.8489 140.404 7.85221 140.53 7.85884C140.659 7.86547 140.76 7.87376 140.833 7.8837V9.30558C140.773 9.289 140.667 9.27077 140.515 9.25089C140.362 9.22769 140.21 9.21609 140.057 9.21609C139.706 9.21609 139.393 9.29066 139.118 9.43981C138.846 9.58564 138.631 9.78948 138.472 10.0513C138.312 10.3098 138.233 10.6048 138.233 10.9363V15.5996H136.746ZM144.705 15.7488C144.088 15.7488 143.538 15.5913 143.054 15.2765C142.573 14.9583 142.196 14.5059 141.921 13.9192C141.649 13.3292 141.513 12.6216 141.513 11.7963C141.513 10.9711 141.65 10.2651 141.926 9.67844C142.204 9.0918 142.585 8.6427 143.069 8.33114C143.553 8.01959 144.101 7.86381 144.715 7.86381C145.189 7.86381 145.57 7.94336 145.858 8.10245C146.15 8.25823 146.375 8.44052 146.534 8.64933C146.697 8.85813 146.823 9.04208 146.912 9.20117H147.002V5.41779H148.488V15.5996H147.036V14.4114H146.912C146.823 14.5738 146.693 14.7594 146.524 14.9682C146.359 15.177 146.13 15.3593 145.838 15.5151C145.546 15.6709 145.169 15.7488 144.705 15.7488ZM145.033 14.481C145.46 14.481 145.822 14.3683 146.117 14.1429C146.415 13.9142 146.64 13.5977 146.793 13.1934C146.948 12.789 147.026 12.3184 147.026 11.7814C147.026 11.2511 146.95 10.7871 146.798 10.3894C146.645 9.99165 146.421 9.68176 146.127 9.45969C145.832 9.23763 145.467 9.1266 145.033 9.1266C144.585 9.1266 144.212 9.2426 143.914 9.47461C143.616 9.70662 143.39 10.0231 143.238 10.4242C143.089 10.8252 143.014 11.2776 143.014 11.7814C143.014 12.2918 143.091 12.7509 143.243 13.1586C143.395 13.5662 143.621 13.8894 143.919 14.128C144.221 14.3633 144.592 14.481 145.033 14.481Z" fill="#0A0A0A"/>
          </svg>
        </div>
      ) : (
        <h2 className="em-header-title">Dashboard</h2>
      )}

      <div className="em-header-actions">
        {/* THEME TOGGLE */}
        <button
          className="em-header-theme-toggle"
          onClick={toggleTheme}
          aria-label="Toggle theme"
        >
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clipPath="url(#clip0_114_12193)">
              <path d="M7.99935 11.3327C9.8403 11.3327 11.3327 9.8403 11.3327 7.99935C11.3327 6.1584 9.8403 4.66602 7.99935 4.66602C6.1584 4.66602 4.66602 6.1584 4.66602 7.99935C4.66602 9.8403 6.1584 11.3327 7.99935 11.3327Z" stroke="#2F2F33" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M8 0.666016V1.99935" stroke="#2F2F33" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M8 14V15.3333" stroke="#2F2F33" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M2.8125 2.8125L3.75917 3.75917" stroke="#2F2F33" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M12.2402 12.2402L13.1869 13.1869" stroke="#2F2F33" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M0.666016 8H1.99935" stroke="#2F2F33" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M14 8H15.3333" stroke="#2F2F33" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M2.8125 13.1869L3.75917 12.2402" stroke="#2F2F33" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M12.2402 3.75917L13.1869 2.8125" stroke="#2F2F33" strokeLinecap="round" strokeLinejoin="round"/>
            </g>
            <defs>
              <clipPath id="clip0_114_12193">
                <rect width="16" height="16" fill="white"/>
              </clipPath>
            </defs>
          </svg>
        </button>

        {/* SEARCH */}
        <div className="em-header-search">
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className="em-header-search-icon"
          >
            <path
              d="M7.33333 12.6667C10.2789 12.6667 12.6667 10.2789 12.6667 7.33333C12.6667 4.38781 10.2789 2 7.33333 2C4.38781 2 2 4.38781 2 7.33333C2 10.2789 4.38781 12.6667 7.33333 12.6667Z"
              stroke="#2F2F33"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
            <path
              d="M13.9996 13.9996L11.0996 11.0996"
              stroke="#2F2F33"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>

          <input
            type="text"
            placeholder="Search"
            className="em-header-search-input"
          />
        </div>

        {/* NOTIFICATION */}
        <button
          className="em-header-notification"
          aria-label="Notifications"
        >
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            className="em-header-notification-icon"
          >
            <path
              d="M12 5.33398C12 4.27312 11.5786 3.2557 10.8284 2.50556C10.0783 1.75541 9.06087 1.33398 8 1.33398C6.93913 1.33398 5.92172 1.75541 5.17157 2.50556C4.42143 3.2557 4 4.27312 4 5.33398C4 10.0007 2 11.334 2 11.334H14C14 11.334 12 10.0007 12 5.33398Z"
              stroke="#2F2F33"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
            <path
              d="M9.15237 14C9.03516 14.2021 8.86693 14.3698 8.66452 14.4864C8.46211 14.6029 8.23262 14.6643 7.99904 14.6643C7.76545 14.6643 7.53596 14.6029 7.33355 14.4864C7.13114 14.3698 6.96291 14.2021 6.8457 14"
              stroke="#2F2F33"
              strokeWidth="1.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>

          <span className="em-header-notification-dot"></span>
        </button>

        {/* PROFILE */}
        <div className="em-header-profile" ref={profileRef}>
          {/* MENU BUTTON (ONLY THIS TOGGLES DROPDOWN) */}
          <button
            className="em-header-profile-menu"
            aria-label="Profile menu"
            onClick={(e) => {
              e.stopPropagation();
              setProfileOpen((prev) => !prev);
            }}
          >
            <svg width="16" height="8" viewBox="0 0 16 8" fill="none">
              <path
                d="M0.75 0.75H14.75"
                stroke="#2F2F33"
                strokeWidth="1.5"
                strokeLinecap="round"
              />
              <path
                d="M0.75 6.75H11.75"
                stroke="#2F2F33"
                strokeWidth="1.5"
                strokeLinecap="round"
              />
            </svg>
          </button>

          {/* AVATAR (NO TOGGLE HERE) */}
          <div className="em-header-profile-avatar">
            <img
              src={avatar}
              alt="User profile"
              className="em-header-avatar-img"
            />
          </div>

          {/* DROPDOWN */}
          {profileOpen && (
            <div
              className="em-profile-dropdown"
              onClick={(e) => e.stopPropagation()}
            >
              <div className="em-profile-user">
                <img src={avatar} alt="User" />
                <div>
                  <div className="em-profile-name">John Doe</div>
                  <div className="em-profile-email">
                    johndoe@gmail.com
                  </div>
                </div>
              </div>

              <div className="em-profile-divider" />

              <button className="em-profile-item">
                <span className="em-profile-item-icon">ðŸ‘¤</span>
                My Profile
              </button>
            </div>
          )}
        </div>
      </div>
    </header>
  );
}
